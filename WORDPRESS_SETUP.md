# WordPress連携セットアップ手順

## 必要な情報
1. **WordPressサイトのURL**（例：https://yourdomain.com）
2. **WordPressユーザー名**（管理者権限を持つユーザー）
3. **アプリケーションパスワード**（WordPress 5.6以降で利用可能）

## 手順1: WordPressサイトでアプリケーションパスワードを生成

### 1. WordPress管理画面にログイン
- あなたのWordPressサイトの管理画面にアクセス
- 管理者権限を持つアカウントでログイン

### 2. プロフィール設定でアプリケーションパスワードを作成
1. **ユーザー** → **プロフィール** を選択
2. ページを下にスクロールして **「アプリケーションパスワード」** セクションを探す
3. **新しいアプリケーション名** に「SEO記事生成システム」と入力
4. **「新しいアプリケーションパスワードを追加」** ボタンをクリック
5. 生成されたパスワード（例：abcd efgh ijkl mnop）をコピー

⚠️ **重要**: このパスワードは一度しか表示されません。必ずコピーして保存してください。

### 3. REST APIが有効になっているか確認
- WordPressサイトで以下のURLにアクセス: `https://yourdomain.com/wp-json/wp/v2/posts`
- JSONデータが表示されればREST APIが有効です
- エラーが表示される場合は、プラグインやテーマの設定を確認してください

## 手順2: 環境変数の設定

`.env.local`ファイルを編集して以下の情報を設定：

```bash
# WordPress API設定
WORDPRESS_API_URL=https://yourdomain.com      # あなたのWordPressサイトのURL
WORDPRESS_USERNAME=your_username              # WordPressユーザー名
WORDPRESS_APP_PASSWORD=abcd efgh ijkl mnop    # 生成したアプリケーションパスワード
```

## 手順3: 接続テスト

設定完了後、以下の手順でテスト：

1. 開発サーバーを再起動: `npm run dev`
2. ブラウザで http://localhost:3001 にアクセス
3. 記事を生成後、「WordPressに投稿」ボタンをクリック

## トラブルシューティング

### エラー: "Application passwords are not available"
- WordPress 5.6以降を使用しているか確認
- プラグインでアプリケーションパスワードが無効化されていないか確認

### エラー: "REST API disabled"
- セキュリティプラグインでREST APIが無効化されていないか確認
- `.htaccess`ファイルでAPIアクセスがブロックされていないか確認

### エラー: "Invalid credentials"
- ユーザー名とアプリケーションパスワードが正しいか確認
- パスワードにスペースが含まれている場合は除去

### エラー: "Permission denied"
- ユーザーが投稿権限を持っているか確認
- 管理者権限または編集者権限が必要

## WordPress設定の確認事項

### パーマリンク設定
- **設定** → **パーマリンク** で「基本」以外の設定にする
- カスタム構造推奨: `/%postname%/`

### REST API設定
- プラグイン「Disable REST API」などが有効になっていないか確認
- セキュリティプラグインでREST APIがブロックされていないか確認

## 投稿時の設定

システムでは以下の設定で投稿されます：
- **投稿ステータス**: 下書き（draft）
- **投稿タイプ**: 投稿（post）
- **カテゴリ**: 未分類（必要に応じて後から変更）
- **タグ**: 記事のキーワードから自動生成

## セキュリティに関する注意事項

1. **アプリケーションパスワードの管理**
   - パスワードは安全な場所に保管
   - 不要になったら削除

2. **WordPressのセキュリティ**
   - WordPress、プラグイン、テーマを最新版に保つ
   - 定期的なバックアップを実行

3. **API制限**
   - 必要に応じてAPI使用量を制限
   - 不正アクセスを監視
