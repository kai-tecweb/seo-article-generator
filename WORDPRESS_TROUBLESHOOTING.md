# WordPress API接続トラブルシューティング

## 現在の状況
- WordPress サイト: https://kai-techweb.com
- ユーザー名: SEO
- アプリケーションパスワード: 設定済み
- エラー: 「現在ログインしていません」（401認証エラー）

## 解決手順

### 1. WordPressアプリケーションパスワードの確認

WordPressの管理画面で以下を確認してください：

1. **管理画面にログイン**
   - https://kai-techweb.com/wp-admin/ にアクセス
   - SEOユーザーでログイン

2. **ユーザー → プロフィール**
   - 左メニューから「ユーザー」→「プロフィール」を選択

3. **アプリケーションパスワード**
   - ページ下部の「アプリケーションパスワード」セクションまでスクロール
   - 「SEO記事生成システム」というアプリケーションが存在するか確認
   - 存在しない場合は、新しく作成してください

### 2. 新しいアプリケーションパスワードの作成

1. **新しいアプリケーションパスワード名を入力**
   ```
   SEO記事生成システム
   ```

2. **「新しいアプリケーションパスワードを追加」をクリック**

3. **生成されたパスワードをコピー**
   - 例: `abcd efgh ijkl mnop qrst uvwx`
   - スペースは含めてもOKです

### 3. ユーザー権限の確認

SEOユーザーの権限を確認してください：

1. **ユーザー → ユーザー一覧**
2. **SEOユーザーの権限グループを確認**
   - 「投稿者」以上の権限が必要です
   - 推奨: 「編集者」または「管理者」

### 4. REST API設定の確認

1. **設定 → パーマリンク**
   - 「変更を保存」をクリック（REST APIを有効化）

2. **プラグイン確認**
   - REST APIを無効化するプラグインがないか確認
   - セキュリティプラグインがREST APIをブロックしていないか確認

### 5. .htaccessファイルの確認

サーバーの.htaccessファイルでREST APIがブロックされていないか確認してください。

## テスト方法

新しいアプリケーションパスワードを取得したら、以下のコマンドでテストしてください：

```bash
curl -u "SEO:新しいアプリケーションパスワード" "https://kai-techweb.com/wp-json/wp/v2/users/me"
```

成功すると、ユーザー情報が返されます。

## 次のステップ

1. 上記の確認・設定を実行
2. 新しいアプリケーションパスワードを取得
3. .env.localファイルのWORDPRESS_APP_PASSWORDを更新
4. 開発サーバーを再起動
5. WordPress投稿テストを再実行

## よくある問題

### アプリケーションパスワード機能が見つからない場合
- WordPressバージョンが5.6以降であることを確認
- HTTPSでアクセスしているか確認（HTTPでは利用できません）

### 権限エラーが続く場合
- ユーザー権限を「編集者」または「管理者」に変更
- セキュリティプラグインの設定を確認

### REST APIにアクセスできない場合
- パーマリンク設定を再保存
- .htaccessファイルの権限を確認
- サーバーのmod_rewriteが有効か確認
